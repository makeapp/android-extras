/* @license
 * Tanx Mraid JS SDK
 *
 * Build Time: 2014-04-14 14:51:18
 *
 * author: 鑳′集
 * mail  : hubo.hb@alibaba-inc.com
 * site  : http://jser.me
 */
(function(win,doc,undef){var isTop=self===top;var depth=function(){var _depth;if(isTop){_depth=0}else{try{if(parent==top){_depth=1}}catch(e){_depth=99999}}return _depth}();var iframeId;var log=window.log?window.log:function(){};var utils={};var toString=Object.prototype.toString;var isType=function(type){return function(o){return toString.call(o)==="[object "+type+"]"}};utils.mix=function(r,s,ov,wl){if(!s||!r){return r}if(ov===undefined){ov=true}var i,p,l;if(wl&&(l=wl.length)){for(i=0;i<l;i++){p=wl[i];if(p in s){if(ov||!(p in r)){r[p]=s[p]}}}}else{for(p in s){if(ov||!(p in r)){r[p]=s[p]}}}return r};utils.mix(utils,{toArry:function(o){return Array.prototype.slice.call(o,0)},iF:isType("Function"),iA:isType("Array"),iS:isType("String"),iO:isType("Object"),iPO:function(o){return o&&S.iO(o)&&!o.nodeType&&!o.setInterval},trim:function(str){return str.replace(/^\s+|\s+$/g,"")},each:function(arry,fn){if(arry.length&&arry.slice){for(var i=0,len=arry.length;i<len;i++){fn(arry[i],i)}}else{for(var key in arry){if(arry.hasOwnProperty(key)){fn(arry[key],key)}}}},zeroPad:function(number){var text="";if(number<10){text+="0"}text+=number;return text},parseJSON:function(str){var obj;if(str&&typeof str==="string"){try{obj=JSON.parse(str)}catch(e){obj=eval("("+str+")")}}else{obj=str||{}}return obj},stringify:function(obj){try{return JSON.stringify(obj)}catch(e){var out,p;if(typeof obj=="object"){if(obj.push){out=[];for(p in obj){out.push(obj[p])}return"["+out.join(",")+"]"}else{out=[];for(p in obj){out.push("'"+p+"':"+obj[p])}return"{"+out.join(",")+"}"}}else{return String(obj)}}}});var evt={};utils.mix(evt,{enableEvent:function(obj){if(obj.__enableEvent){return obj}var listeners=obj.__eventsListeners={};obj.addEventListener=function(name,cb){if(!listeners[name]){listeners[name]=[]}listeners[name].push(cb)};obj.fireEvent=function(name,data){if(listeners[name]){utils.each(listeners[name],function(v,i){v.apply(null,utils.iA(data)?data:[data])})}};obj.removeEventListener=function(name,cb){if(listeners[name]){if(!cb){delete listeners[name]}else{for(var i=0;i<listeners[name].length;i++){if(listeners[name][i]===cb){listeners[name].splice(i,1)}}}}};obj.__enableEvent=true;return obj}});var transMap={initDataReady:["initData"],error:["message","action"],stateChange:["state"],viewableChange:["viewable"],sizeChange:["width","height"],screenChange:["width","height"],headingChange:["heading"],keyboardChange:["open"],locationChange:["lat","lon","acc","alt","tp","ts"],networkChange:["online","connection"],networkProtocolChange:["connection"],orientationChange:["orientation"],response:["url","response"],tiltChange:["x","y","z"]};var translate=function(eventName,o){var r=[];var obj=utils.iA(o)&&o.length>0?o[0]:{};if(transMap[eventName]){utils.each(transMap[eventName],function(v,i){r.push(obj[v])});r.push(obj._iframeId);return r}else{return o}};var messager={};var iframeUniqId=0;var messagerCmdMap={getIframeId:function(msg){if(iframeId!==undef){var strId="tanx_mraid_iframe_id";var iframes=doc.getElementsByTagName("iframe");utils.each(utils.toArry(iframes),function(v,i){var id=iframeId+"-"+iframeUniqId++;var downMsg=messager.defaultMsg({data:id});downMsg.direction="down";downMsg.cmd="setIframeId";if(!v.getAttribute(strId)){v.setAttribute(strId,id)}if(v.getAttribute(strId)){downMsg.data=v.getAttribute(strId)}v.contentWindow.postMessage(utils.stringify(downMsg),"*")})}},setIframeId:function(msg){iframeId=msg.data;messagerCmdMap.getIframeId()},execute:function(msg){var data=[];if(depth===0&&mraid[msg.exeName]){if(!utils.iA(msg.data)){data.push(msg.data)}else{data=msg.data}data.push(msg.origin);mraid[msg.exeName].apply(null,data)}},fireEvent:function(msg){if(msg.eventName){if(msg.data._iframeId===iframeId||msg.eventName=="stateChange"||msg.data._iframeId===undef){mraid.fireEvent(msg.eventName,translate(msg.eventName,msg.data))}}},syncInitData:function(msg){if(msg.target===iframeId){mraid.fireEvent("initDataReady",msg.data);return false}if(isInitDataReady){messager.down({cmd:"syncInitData",target:msg.target,data:mraidData})}},syncReady:function(msg){if(msg.target===iframeId&&depth!==0){mraid.fireEvent("ready");return false}if(isReady){messager.down({cmd:"syncReady",target:msg.target})}}};utils.mix(messager,{listener:function(msgData){if(msgData.data.indexOf('"tanxMraidVer"')==-1){return false}var msg=utils.parseJSON(msgData.data);if(msg.direction){if(depth!==0){messager[msg.direction](msg,msg.cmd)}}if(msg.direction!=="up"||depth===0){if(messagerCmdMap[msg.cmd]){messagerCmdMap[msg.cmd](msg)}}},defaultMsg:function(msg,cmd){var processedMsg={};utils.mix(processedMsg,msg);processedMsg.tanxMraidVer="v1";if(processedMsg.target===undef){processedMsg.target="*"}if(processedMsg.origin===undef){processedMsg.origin=iframeId}if(cmd){processedMsg.cmd=cmd}return processedMsg},up:function(msg,cmd){var upMsg=messager.defaultMsg(msg,cmd);if(upMsg.direction==undef){upMsg.direction="up"}parent.postMessage(utils.stringify(upMsg),"*")},down:function(msg,cmd,filter){var downMsg=messager.defaultMsg(msg,cmd);if(downMsg.direction==undef){downMsg.direction="down"}if(!filter){filter=function(){return true}}iframes=doc.getElementsByTagName("iframe");utils.each([].slice.call(iframes),function(v,i){if(filter(v)){v.contentWindow.postMessage(utils.stringify(downMsg),"*")}})}});window.addEventListener("message",messager.listener);var mraidbridge={};evt.enableEvent(mraidbridge);(function(){var ua=win.navigator.userAgent;var isIOS=/iPhone|iPad|iPod/i.test(ua);var isAndroid=/Android/i.test(ua);var osVersion=ua.match(/(?:OS|Android)[\/\s](\d+[._]\d+(?:[._]\d+)?)/i);var hasOwnProperty=Object.prototype.hasOwnProperty;var callbackMap={},inc=1,iframePool=[],iframeLimit=3;var LOCAL_PROTOCOL="mraid";var PROTOCOL="mraid";var IFRAME_PREFIX="mraid_iframe_";var SUCCESS_PREFIX="suc_";var FAILURE_PREFIX="err_";var PARAM_PREFIX="param_";function compareVersion(v1,v2){v1=v1.toString().split(".");v2=v2.toString().split(".");for(var i=0;i<v1.length||i<v2.length;i++){var n1=parseInt(v1[i],10),n2=parseInt(v2[i],10);if(win.isNaN(n1)){n1=0}if(win.isNaN(n2)){n2=0}if(n1<n2){return-1}else if(n1>n2){return 1}}return 0}function callback(func,param){if(isAndroid&&compareVersion(osVersion,"2.4.0")<0){setTimeout(function(){func&&func(param.value||param)},1)}else{func&&func(param.value||param)}}if(osVersion){osVersion=(osVersion[1]||"0.0.0").replace(/\_/g,".")}else{osVersion="0.0.0"}var WV_Core={call:function(obj,method,param,successCallback,failureCallback,timeout){var sid;if(timeout>0){sid=setTimeout(function(){WV_Core.onFailure(sid,{ret:"TIMEOUT"})},timeout)}else{sid=WV_Private.getSid()}WV_Private.registerCall(sid,successCallback,failureCallback);if(isAndroid){WV_Private.callMethodByPrompt(obj,method,WV_Private.buildParam(param),sid+"")}else if(isIOS){WV_Private.callMethodByIframe(obj,method,WV_Private.buildParam(param),sid+"")}},getParam:function(sid){return WV_Private.params[PARAM_PREFIX+sid]||""},onSuccess:function(sid,msg){clearTimeout(sid);var func=WV_Private.unregisterCall(sid).success,param=WV_Private.parseParam(msg);callback(func,param);WV_Private.onComplete(sid)},onFailure:function(sid,msg){clearTimeout(sid);var func=WV_Private.unregisterCall(sid).failure,param=WV_Private.parseParam(msg);callback(func,param);WV_Private.onComplete(sid)}};var WV_Private={params:{},buildParam:function(obj){if(obj&&typeof obj==="object"){return JSON.stringify(obj)}else{return obj||""}},parseParam:function(str){if(str&&typeof str==="string"){try{obj=JSON.parse(str)}catch(e){obj=eval("("+str+")")}}else{obj=str||{}}return obj},getSid:function(){return Math.floor(Math.random()*(1<<50))+""+inc++},registerCall:function(sid,successCallback,failedCallback){if(successCallback){callbackMap[SUCCESS_PREFIX+sid]=successCallback}if(failedCallback){callbackMap[FAILURE_PREFIX+sid]=failedCallback}},unregisterCall:function(sid){var sucId=SUCCESS_PREFIX+sid,failId=FAILURE_PREFIX+sid,call={success:callbackMap[sucId],failure:callbackMap[failId]};delete callbackMap[sucId];delete callbackMap[failId];return call},useIframe:function(sid,url){var iframeid=IFRAME_PREFIX+sid,iframe=iframePool.pop();if(!iframe){iframe=doc.createElement("iframe");iframe.setAttribute("frameborder","0");iframe.style.cssText="width:0;height:0;border:0;display:none;"}iframe.setAttribute("id",iframeid);iframe.setAttribute("src",url);if(!iframe.parentNode){setTimeout(function(){doc.body.appendChild(iframe)},5)}},retrieveIframe:function(sid){var iframeid=IFRAME_PREFIX+sid,iframe=doc.getElementById(iframeid);if(iframePool.length>=iframeLimit){doc.body.removeChild(iframe)}else{iframePool.push(iframe)}},callMethodByIframe:function(obj,method,param,sid){var src=LOCAL_PROTOCOL+"://"+obj+":"+sid+"/"+method+"?"+param;this.useIframe(sid,src)},callMethodByPrompt:function(obj,method,param,sid){var title=LOCAL_PROTOCOL+"://"+obj+":"+sid+"/"+method+"?"+param;var val=PROTOCOL+":";win.prompt(title,val)},onComplete:function(sid){if(isIOS){this.retrieveIframe(sid)}}};for(var key in WV_Core){if(!hasOwnProperty.call(mraidbridge,key)){mraidbridge[key]=WV_Core[key]}}mraidbridge.nativeCall=function(method,params,cb){mraidbridge.call("AlimamaMraid",method,params,cb)}})();if(depth===0){iframeId="0"}else{messager.up({},"getIframeId")}var mraid={};evt.enableEvent(mraid);var expandProperties={useCustomClose:false,useBackground:false,backgroundColor:"#ffffff",backgroundOpacity:1,lockOrientation:false};var dimensionValidators={x:function(value){return!isNaN(value)&&value>=0},y:function(value){return!isNaN(value)&&value>=0},width:function(value){return!isNaN(value)&&value>=0},height:function(value){return!isNaN(value)&&value>=0}};var expandPropertyValidators={width:function(value){return!isNaN(value)},height:function(value){return!isNaN(value)},useCustomClose:function(value){return value===true||value===false},useBackground:function(value){return value===true||value===false},backgroundColor:function(value){return typeof value=="string"&&value.substr(0,1)=="#"&&!isNaN(parseInt(value.substr(1),16))},backgroundOpacity:function(value){return!isNaN(value)&&value>=0&&value<=1},lockOrientation:function(value){return value===true||value===false}};var shakePropertyValidators={intensity:function(value){return!isNaN(value)},interval:function(value){return!isNaN(value)}};var valid=function(obj,validators,action,full){var i;if(full){if(obj===undefined){mraidbridge.fireEvent("error",["Required object missing.",action]);return false}else{for(i in validators){if(obj[i]===undefined){mraidbridge.fireEvent("error",["Object missing required property "+i,action]);return false}}}}for(i in obj){if(!validators[i]){mraidbridge.fireEvent("error",["Invalid property specified - "+i+".",action]);return false}else if(!validators[i](obj[i])){mraidbridge.fireEvent("error",["Value of property "+i+" is not valid type.",action]);return false}}return true};var NETWORK=mraid.NETWORK={OFFLINE:"offline",WIFI:"wifi",CELL:"cell",UNKNOWN:"unknown"};var mraidData={state:"loading",size:{width:0,height:0},maxSize:{width:0,height:0},defaultPosition:{x:0,y:0,width:0,height:0},supports:{"level-1":false,"level-2":false,"level-3":false,screen:false,orientation:false,heading:false,location:false,shake:false,tilt:false,network:false,sms:false,phone:false,email:false,calendar:false,camera:false,audio:false,video:false,map:false},networkProtocol:"",network:NETWORK.UNKNOWN,location:null,orientation:-1,screenSize:null};var heading=-1;var keyboardState=false;var placementType="inline";var shakeProperties=null;var tilt=null;var useCustomClose=false;var viewable=false;function genMraidCallFunc(func){return function(){var arryArguments=utils.toArry(arguments);var _iframeId;if(arguments.length>func.length){_iframeId=arryArguments.pop()}else if(arguments.length==func.length){_iframeId=iframeId}var params=func.apply(null,arryArguments);if(params&&utils.iA(params)){if(!params[1]){params[1]={}}params[1]._iframeId=_iframeId;mraidbridge.nativeCall.apply(null,params)}}}if(depth===0){utils.each(["initDataReady","error","ready","stateChange","viewableChange","expandProperties","sizeChange","screenChange","headingChange","keyboardChange","locationChange","networkChange","actionChange","orientationChange","response","shake","tiltChange"],function(v,i){mraidbridge.addEventListener(v,function(data){var arrData=utils.toArry(arguments);mraid.fireEvent(v,translate(v,arrData));messager.down({cmd:"fireEvent",eventName:v,data:arrData})})});mraid.addEventListener("expandProperties",function(val){utils.mix(expandProperties,val)});utils.mix(mraid,{close:genMraidCallFunc(function(){return["close"]}),setExpandProperties:function(o){if(valid(o,expandPropertyValidators,"setExpandProperties")){expandProperties=o}},expand:genMraidCallFunc(function(url){mraid.close();if(valid(expandProperties,expandPropertyValidators,"expand",false)){var o=utils.mix({url:url},expandProperties);return["expand",o]}else{mraid.close()}}),hide:genMraidCallFunc(function(){return["hide"]}),show:genMraidCallFunc(function(){return["show"]}),download:genMraidCallFunc(function(json){if(!json.url){mraidbridge.fireEvent("error",["url is required.","download"])}else{return["download"]}}),useCustomClose:genMraidCallFunc(function(flag){expandProperties.useCustomClose=flag;return["useCustomClose",{useCustomClose:flag}]}),open:genMraidCallFunc(function(url,controls){if(!url){mraidbridge.fireEvent("error",["URL is required.","open"]);return}var _controls={back:true,forward:true,refresh:true};if(controls){_controls=utils.mix(_controls,controls)}_controls.url=url;return["open",_controls]}),openMap:genMraidCallFunc(function(poi,fullscreen){if(!poi){mraidbridge.fireEvent("error",["POI is required.","openMap"])}else{return["openMap",{POI:poi,fullscreen:fullscreen}]}}),resize:genMraidCallFunc(function(width,height){var maxSize=mraidData.maxSize;var size=mraidData.size;if(width===null||height===null||isNaN(width)||isNaN(height)||width<0||height<0){mraidbridge.fireEvent("error",["Requested size must be numeric values between 0 and maxSize.","resize"])}else if(width>maxSize.width||height>maxSize.height){mraidbridge.fireEvent("error",["Request ("+width+" x "+height+") exceeds maximum allowable size of ("+maxSize.width+" x "+maxSize.height+")","resize"])}else if(width==size.width&&height==size.height){mraidbridge.fireEvent("error",["Requested size equals current size.","resize"])}else{return["resize",{width:width,height:height}]}}),request:genMraidCallFunc(function(url,display){if(!mraidData.supports["level-3"]){mraidbridge.fireEvent("error",["Method not supported by this client.","request"])}else if(!uri||typeof uri!="string"){mraidbridge.fireEvent("error",["URI is required.","request"])}else{return["request",{uri:uri,display:display}]}}),setShakeProperties:function(properties){if(!mraidData.supports.shake){mraidbridge.fireEvent("error",["Method not supported by this client.","setShakeProperties"])}else if(valid(properties,shakePropertyValidators,"setShakeProperties")){setShakeProperties=properties}},storePicture:genMraidCallFunc(function(url){return["storePicture",{url:url}]}),createEvent:genMraidCallFunc(function(date,title,body){if(!date||!title||!body){mraidbridge.fireEvent("error",["Method need date, title, body.","createEvent"]);return}title=utils.trim(title);body=utils.trim(body);if(!mraidData.supports.calendar){mraidbridge.fireEvent("error",["Method not supported by this client.","createEvent"])}else if(!date||typeof date!="object"||!date.getDate){mraidbridge.fireEvent("error",["Valid date required.","createEvent"])}else if(!title||typeof title!="string"||title.length===0){mraidbridge.fireEvent("error",["Valid title required.","createEvent"])}else if(!body||typeof body!="string"||body.length===0){mraidbridge.fireEvent("error",["Valid body required.","createEvent"])}else{mraidbridge.createEvent(date,title,body);var year=date.getFullYear();var month=date.getMonth()+1;var day=date.getDate();var hours=date.getHours();var minutes=date.getMinutes();var dateString=year+utils.zeroPad(month)+utils.zeroPad(day)+utils.zeroPad(hours)+utils.zeroPad(minutes);return["calendar",{date:dateString,title:title,body:body}]}}),makeCall:genMraidCallFunc(function(number){if(!mraidData.supports.phone){mraidbridge.fireEvent("error",["Method not supported by this client.","makeCall"])}else if(!number||typeof number!="string"){mraidbridge.fireEvent("error",["Request must provide a number to call.","makeCall"])}else{return["phone",{number:number}]}}),sendMail:genMraidCallFunc(function(recipient,subject,body){if(!mraidData.supports.email){mraidbridge.fireEvent("error",["Method not supported by this client.","sendMail"])}else if(!recipient||typeof recipient!="string"){mraidbridge.fireEvent("error",["Request must specify a recipient.","sendMail"])}else{return["email",{to:recipient,subject:subject,body:body,html:"N"}]}}),sendSMS:genMraidCallFunc(function(recipient,body){if(!mraidData.supports.sms){mraidbridge.fireEvent("error",["Method not supported by this client.","sendSMS"])}else if(!recipient||typeof recipient!="string"){mraidbridge.fireEvent("error",["Request must specify a recipient.","sendSMS"])}else{return["sms",{to:recipient,body:body}]}}),playAudio:genMraidCallFunc(function(URL,properties){if(!mraidData.supports.audio){mraidbridge.fireEvent("error",["Method not supported by this client.","playAudio"])}else if(!URL||typeof URL!="string"){mraidbridge.fireEvent("error",["Request must specify a URL","playAudio"])}else{properties=utils.mix({url:URL,autoplay:true,controls:true,loop:false,position:false,startStyle:"normal",stopStyle:"normal"},properties);return["playAudio",properties]}}),playVideo:genMraidCallFunc(function(URL,properties){if(!mraidData.supports.video){mraidbridge.fireEvent("error",["Method not supported by this client.","playVideo"])}else if(!URL||typeof URL!="string"){mraidbridge.fireEvent("error",["Request must specify a URL","playVideo"])}else{var _properties=utils.mix({url:URL,audioMuted:false,autoplay:true,controls:true,loop:false,position:false,startStyle:"normal",stopStyle:"normal"},properties);if(typeof _properties.position!="undefined"&&_properties.position!==null){_properties.position_top=_properties.position.top;_properties.position_left=_properties.position.left;if(typeof _properties.width!="undefined"&&_properties.width!==null){_properties.position_width=_properties.width}if(typeof _properties.height!="undefined"&&_properties.height!==null){_properties.position_height=_properties.height}}return["playVideo",_properties]}})})}var isInitDataReady=false;var isReady=false;var listeners={initDataReady:function(data){if(!data){return false}isInitDataReady=true;utils.each(data,function(v,key){if(key==="supports"){utils.each(v,function(vv,i){mraidData.supports[vv]=true})}else{mraidData[key]=v}})},ready:function(){isReady=true},sizeChange:function(w,h){if(!mraidData.size){mraidData.size={}}mraidData.size.width=w;mraidData.size.height=h},maxSizeChange:function(w,h){if(!mraidData.maxSize){mraidData.maxSize={}}mraidData.maxSize.width=w;mraidData.maxSize.height=h},screenChange:function(w,h){if(!mraidData.screenSize){mraidData.screenSize={}}mraidData.screenSize.width=w;mraidData.screenSize.height=h},stateChange:function(val){mraidData.state=val},keyboardChange:function(val){keyboardState=val},networkChange:function(online,connection){mraidData.network=connection},locationChange:function(lat,lon,acc){if(!mraidData.location){mraidData.location={}}mraidData.location.lat=lat;mraidData.location.lon=lon;mraidData.location.acc=acc},viewableChange:function(val){viewable=val},headingChange:function(val){heading=val},orientationChange:function(val){mraidData.orientation=val},tiltChange:function(val){tilt=val},shakeProperties:function(){shakeProperties=val},networkProtocolChange:function(val){mraidData.networkProtocol=val}};utils.each(listeners,function(v,key){mraid.addEventListener(key,v)});utils.mix(mraid,{getVersion:function(){var ver="1.0";if(mraidData.supports["level-2"]){ver="2.0"}if(mraidData.supports["level-3"]){ver="3.0"}return ver},getExpandProperties:function(){return utils.mix({},expandProperties)},getSize:function(){return utils.mix({},mraidData.size)},getMaxSize:function(){return utils.mix({},mraidData.maxSize)},supports:function(feature){if(mraidData.supports[feature]){return true}else{return false}},getScreenSize:function(){if(!mraidData.supports.screen){mraidbridge.fireEvent("error",["Method not supported by this client.","getScreenSize"])}else{return null===mraidData.screenSize?null:utils.mix({},mraidData.screenSize)}},getDefaultPosition:function(){return utils.mix({},mraidData.defaultPosition)},getState:function(){return mraidData.state},getKeyboardState:function(){if(!mraidData.supports["level-2"]){mraidbridge.fireEvent("error",["Method not supported by this client.","getKeyboardState"]);return}return keyboardState},getNetwork:function(){if(!mraidData.supports.network){mraidbridge.fireEvent("error",["Method not supported by this client.","getNetwork"])}return mraidData.network},getLocation:function(){if(!mraidData.supports.location){mraidbridge.fireEvent("error",["Method not supported by this client.","getLocation"])}return null===mraidData.location?null:utils.mix({},mraidData.location)},getPlacementType:function(){return placementType},isViewable:function(){return viewable},getHeading:function(){if(!mraidData.supports.heading){mraidbridge.fireEvent("error",["Method not supported by this client.","getHeading"])}return heading},getOrientation:function(){if(!mraidData.supports.orientation){mraidbridge.fireEvent("error",["Method not supported by this client.","getOrientation"])}return mraidData.orientation},getTilt:function(){if(!mraidData.supports.tilt){mraidbridge.fireEvent("error",["Method not supported by this client.","getTilt"])}else{return null===tilt?null:utils.mix({},tilt)}},getShakeProperties:function(){if(!mraidData.supports.shake){mraidbridge.fireEvent("error",["Method not supported by this client.","getShakeProperties"])}else{return null===shakeProperties?null:utils.mix({},shakeProperties)}},getNetworkProtocol:function(){return mraidData.networkProtocol}});if(depth!==0){utils.each(["open","openMap","download","resize","createEvent","makeCall","sendMail","sendSMS","playAudio","playVideo","useCustomClose","close","request","expand","hide","setExpandProperties","show"],function(v,i){mraid[v]=function(){var params=utils.toArry(arguments);messager.up({cmd:"execute",exeName:v,origin:iframeId,data:params})}});var retryCount=0;var retryTimer=null;retryTimer=setInterval(function(){if(!isInitDataReady&&retryCount<10){messager.up({cmd:"syncInitData",target:iframeId});messager.up({cmd:"syncReady",target:iframeId});retryCount++}else{clearInterval(retryTimer)}},50)}if(win.tanxMraidDebug){win.messager=messager;win.getIframeId=function(){return iframeId};win.getDepth=function(){return depth};win.evt=evt;win.utils=utils}win.mraidbridge=mraidbridge;win.mraid=mraid})(window,document);